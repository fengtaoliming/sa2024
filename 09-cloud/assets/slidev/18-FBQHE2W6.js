import{B as I,C as L}from"../modules/unplugin-icons-BJo5e7Wi.js";import{d as q,t as $,az as P,C as v,ac as z,y as b,aA as M,o as h,b as D,f as R,A as k,c as u,g as T,i as W,h as j,k as g,l as F,m as K,q as O,s as U,e as s,a6 as e}from"../modules/vue-uEYNCD1x.js";import{c as B,an as X,ao as Z,ap as G,_ as S,aq as x}from"../index-BFuDrq-n.js";import{u as w,p as J,f as Q}from"./context-DHtX8Cxj.js";import{I as Y}from"./two-cols-CFH8gQce.js";import"../modules/shiki-BzAJ3tB6.js";const ss=["title"],is=q({__name:"CodeBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},lines:{type:Boolean,default:B.lineNumbers},at:{type:[String,Number],default:"+1"},maxHeight:{type:String,default:void 0}},setup(y){const i=y,{$clicksContext:r}=w(),l=$(),d=X();P(()=>{r.unregister(d)}),v(()=>{var t;(t=l.value)==null||t.classList.toggle("slidev-code-line-numbers",i.lines)}),z(()=>{var c;if(!r||!((c=i.ranges)!=null&&c.length))return;const t=r.calculateSince(i.at,i.ranges.length-1);r.register(d,t);const a=b(()=>Math.max(0,r.current-t.start+1)),n=b(()=>i.finally==="last"?i.ranges.at(-1):i.finally.toString());v(()=>{if(!l.value)return;let p=i.ranges[a.value]??n.value;const A=p==="hide";l.value.classList.toggle(Z,A),A&&(p=i.ranges[a.value+1]??n.value);const _=l.value.querySelector(".shiki"),f=Array.from(_.querySelectorAll("code > .line")),V=f.length;if(G(p,V,i.startLine,o=>[f[o]]),i.maxHeight){const o=Array.from(_.querySelectorAll(".line.highlighted"));o.reduce((C,H)=>H.offsetHeight+C,0)>l.value.offsetHeight?o[0].scrollIntoView({behavior:"smooth",block:"start"}):o.length>0&&o[Math.round((o.length-1)/2)].scrollIntoView({behavior:"smooth",block:"center"})}})});const{copied:m,copy:E}=M();function N(){var a,n;const t=(n=(a=l.value)==null?void 0:a.querySelector(".slidev-code"))==null?void 0:n.textContent;t&&E(t)}return(t,a)=>{const n=I,c=L;return h(),D("div",{ref_key:"el",ref:l,class:W(["slidev-code-wrapper relative group",{"slidev-code-line-numbers":i.lines}]),style:j({"max-height":i.maxHeight,"overflow-y":i.maxHeight?"scroll":void 0,"--start":i.startLine})},[R(t.$slots,"default"),k(B).codeCopy?(h(),D("button",{key:0,class:"slidev-code-copy absolute top-0 right-0 transition opacity-0 group-hover:opacity-20 hover:!opacity-100",title:k(m)?"Copied":"Copy",onClick:a[0]||(a[0]=p=>N())},[k(m)?(h(),u(n,{key:0,class:"p-2 w-8 h-8"})):(h(),u(c,{key:1,class:"p-2 w-8 h-8"}))],8,ss)):T("v-if",!0)],6)}}}),es=S(is,[["__file","/usr/local/lib/node_modules/@slidev/cli/node_modules/@slidev/client/builtin/CodeBlockWrapper.vue"]]),ts="/sa2024/09-cloud/assets/09-minikube-demo-DD3XZVnO.png",ls=s("h1",null,"Demo",-1),as=s("p",null,[s("br"),s("br")],-1),ns=s("img",{src:ts,class:"h-40"},null,-1),os=s("br",null,null,-1),rs=s("div",{style:{"text-align":"right"}},"https://www.bilibili.com/video/BV1pA411q71T?p=3",-1),hs=s("br",null,null,-1),ks=s("br",null,null,-1),cs=s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"# 启动minikube")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"minikube"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," start")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"# 将当前shell的docker环境指向minikube内")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#B8A965","--shiki-light":"#998418"}},"eval"),s("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}}," $("),s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"minikube"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," docker-env"),s("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"# 编译打包（docker镜像保存在minikube内）")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"mvn"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," compile"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," jib:dockerBuild")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"# 创建一个deployment")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"kubectl"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," apply"),s("span",{style:{"--shiki-dark":"#C99076","--shiki-light":"#A65E2B"}}," -f"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," echo-deployment.yaml")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"# 创建一个service（暴露出deployment的端口）")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"kubectl"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," expose"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," deployment"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," echo-boot"),s("span",{style:{"--shiki-dark":"#C99076","--shiki-light":"#A65E2B"}}," --type=NodePort"),s("span",{style:{"--shiki-dark":"#C99076","--shiki-light":"#A65E2B"}}," --port=8080")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"# 获得service的url")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"minikube"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," service"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," echo-boot"),s("span",{style:{"--shiki-dark":"#C99076","--shiki-light":"#A65E2B"}}," --url")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"curl"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," http://.....")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"# 横向扩展")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"kubectl"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," scale"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," deployment"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," echo-boot"),s("span",{style:{"--shiki-dark":"#C99076","--shiki-light":"#A65E2B"}}," --replicas=2")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"curl"),s("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}}," http://.....")])])],-1),ps={__name:"18",setup(y){return J(x),w(),(i,r)=>{const l=es;return h(),u(Y,O(U(k(Q)(k(x),17))),{right:g(d=>[hs,ks,F(l,K({},{ranges:[]}),{default:g(()=>[cs]),_:1},16)]),default:g(()=>[ls,as,ns,os,rs]),_:1},16)}}},fs=S(ps,[["__file","/@slidev/slides/18.md"]]);export{fs as default};
